tinymce.PluginManager.add("customform",function(n){function r(t){return function(){var i=n.settings.customform_list;typeof linkList=="string"?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):t(i)}}function i(t){function u(n){i.customformID=n.control.value()}function f(){var n=[{text:"None",value:""}];return tinymce.each(t,function(t){n.push({text:t.text||t.title,value:t.value||t.url,menu:t.menu})}),n}var i={},e=n.selection,h=n.dom,o,s,r;t&&(r={type:"listbox",label:"Form list",values:f(),onselect:u}),n.windowManager.open({title:"Insert form",width:420+n.getLang("example.delta_width",0),height:120+n.getLang("example.delta_height",0),body:[{type:"textbox",name:"recipientEmail",label:"Recipient email",onchange:function(){i.text=this.value()}},r],onsubmit:function(){var r='[%customform data-formID="'+i.customformID+'" data-recipient="'+i.text+'" /%]';n.insertContent(r)}})}n.addButton("insertform",{title:"Insert form",image:"/Images/insert_form.png",onclick:r(i)}),this.showDialog=i,n.addMenuItem("insertform",{text:"Insert form",context:"insert",onclick:r(i)})})